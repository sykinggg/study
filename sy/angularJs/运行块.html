<!DOCTYPE HTML>
<html>
	<head>
		<meta charset = 'utf-8'>
	</head>
	<body>
		<!-- run() 函数接受个参数。 -->
<!--   initializeFn （函数）AngularJS在注入器创建后会执行这个函数。 -->
	</body>
	<script src = 'angular.js'></script>
	<script>
		var app = angular.module('app',[]);
		app.run(function ($rootScope, AuthService) {
			$rootScope.$on('$routeChangeStart',function(evt, next, current){
				// 如果用户未登录
				if(!AuthService.userLoggendIn()){
					if(next.templateUrl === "login.html"){
						// 已经转向登录路由因此无需重定向
					}else{
						$location.path('/login');
					}
				}
			})
		})
	</script>
</html>